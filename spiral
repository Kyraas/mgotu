// ЗаполнениеМатицы.cpp: определяет точку входа для консольного приложения.
//

#include "stdafx.h"
#include <iostream>
using namespace std;

int main() {
	setlocale(LC_ALL, "RUS");
	int **a, j, k, n, p;
	cout << "(Ctrl+Z Enter для выхода из программы.) \n" << "Введите размерность квадратной матрицы:";
	do {
		cin >> n;
		if (n <= 0) cout << "\nЧисло должно быть больше нуля.\n" << "Попробуйте еще раз:";
	} while (n <= 0);
	cout << endl;
	while (!feof(stdin)) {
		int i = 1;
		a = new int *[n];
		for (int i = 0; i < n; i++) a[i] = new int[n];
		p = n / 2;//Определение кол-ва витков спирали
		for (k = 1; k <= p; k++)//Цикл по номеру витка
		{
			for (j = k - 1; j < n - k + 1; j++) a[k - 1][j] = i++;//Определение значений верхней строки (вправо)
			for (j = k; j < n - k + 1; j++) a[j][n - k] = i++;//По правому столбцу (вниз)
			for (j = n - k - 1; j >= k - 1; --j) a[n - k][j] = i++;//по нижней строке (влево)
			for (j = n - k - 1; j >= k; j--) a[j][k - 1] = i++;//по левому столбцу (вверх)
		}
		if (n % 2 == 1) a[p][p] = pow(n,2);//если размерность матрицы нечетная
		for (i = 0; i < n; i++) {//вывод полученной матрицы
			for (j = 0; j < n; j++)
				cout << a[i][j] << "\t";
			cout << "\n\n";
		}
		cout << "Введите размерность квадратной матрицы:";
		do {
			cin >> n;
			if (n <= 0) cout << "\nЧисло должно быть больше нуля.\n" << "Попробуйте еще раз:";
		} while (n <= 0);
		cout << endl;
	}
	return 0;
}
